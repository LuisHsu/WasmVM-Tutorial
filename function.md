# 函式 (Function)

函式是一段執行特定功能的指令集合，WebAssembly 的函式可以傳入若干個數值當作區域變數、定義屬於函式自己的區域變數，以及在結束時傳回一個數值。尤其在瀏覽器上更是 WebAssembly 和網頁的 JavaScript 程式碼互動的重要角色

函式的運作機制和 block 差不多，會在堆疊裡放進一個框架 \(Frame\)，這個 frame 會記錄目前在哪個模組，以及函式的區域變數。同樣的，frame 會像遮罩一樣把先前的數值和 label 遮住，讓函式裏面的指令看不到先前的數值和 label，等到函式結束的時候再把 frame 取出，回到先前的狀態

函式執行的時候自帶一個 block，所以也會有和 block 差不多的行為，結束時一樣要把堆疊清空，或是在有指定回傳值的情況下剩下一個相對應的回傳值

## 宣告函式

函式的宣告非常簡單，像全域變數和記憶體一樣宣告在模組裡，裏面放入要在函式裡執行的指令

```
(module
	(func
		i32.const 3
		drop
	)
	(start 0)
)
```

也可以幫函式加上名稱，像之前的範例就有幫函式加上 $main

```
(module
	(func $main
		i32.const 3
		drop
	)
	(start $main)
)
```

## 呼叫函式